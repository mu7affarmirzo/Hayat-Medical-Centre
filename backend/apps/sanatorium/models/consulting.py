from django.db import modelsfrom apps.account.models import Account, MedicalService, DoctorAccountModelfrom apps.lis.models import LabResearchModelfrom apps.logus.models import ServiceModelfrom apps.logus.models.consulting import Consultingfrom apps.sanatorium.models import ComplaintModel, ProfessionsModel, DiagnosisTemplate , IllnessHistoryfrom apps.warehouse.models import ItemsModelAPP_STATE_CHOICES = (        ('Приём завершён', 'Приём завершён'),        ('Пациент на прием не явился', 'Пациент на прием не явился'),        ('Не завершено', 'Не завершено'),    )class DiagnosisTemplateCategory(models.Model):    name = models.CharField(max_length=255)    def __str__(self):        return f"{self.name}"class BasicTemplateModel(models.Model):    name = models.CharField(max_length=255)    code = models.CharField(max_length=10, null=True, blank=True)    category = models.ForeignKey(DiagnosisTemplateCategory, on_delete=models.CASCADE)    def __str__(self):        if self.code:            return f"{self.code}: {self.name}"        return f"{self.name}"class InitialAppointmentWithDoctorModel(models.Model):    created_by = models.ForeignKey(Account, related_name='iawd_created', on_delete=models.SET_NULL, null=True)    created_at = models.DateTimeField(auto_now_add=True)    modified_at = models.DateTimeField(auto_now=True)    modified_by = models.ForeignKey(Account, related_name="modf_iawd", on_delete=models.SET_NULL, null=True)    state = models.CharField(choices=APP_STATE_CHOICES, max_length=250, default='assigned')    CONSCIOUSNESS_CHOICES = (        ("ясное", "ясное"),        ("ступор", "ступор"),        ("сопор", "сопор"),        ("кома", "кома")    )    STATE_CHOICES = (        ("активное", "активное"),        ("пассивное", "пассивное"),        ("вынужденное", "вынужденное")    )    CONSTITUTION_CHOICES = (        ("нормасетик", "нормасетик"),        ("аснетик", "аснетик"),        ("гиперстеник", "гиперстеник")    )    SKIN_CHOICES = (        ("нормальной окраски", "нормальной окраски"),        ("бледные", "бледные"),        ("гиперемия", "гиперемия"),        ("иктеричные", "иктеричные"),        ("субиктеричные", "субиктеричные"),        ("акроцианоз", "акроцианоз"),        ("земелистого цвета", "земелистого цвета")    )    SKIN_MOISTURE_CHOICES = (        ("обычная", "обычная"),        ("влажная", "влажная"),        ("сухая", "сухая")    )    SKIN_TURGOR_CHOICES = (        ("в норме", "в норме"),        ("снижет", "снижет"),    )    SUBCUTANEOUS_FAT_CHOICES = (        ("развита умеренно", "развита умеренно"),        ("развита слабо", "развита слабо"),        ("развита чрезмерно", "развита чрезмерно"),    )    LYMPH_NODES_CHOICES = (        ("не увеличены", "не увеличены"),        ("мягкие", "мягкие"),        ("плотные", "плотные"),        ("эластичные", "эластичные"),    )    BREATHING_TYPE_CHOICES = (        ("нет", "нет"),        ("брюшной", "брюшной"),        ("смешанный", "смешанный"),    )    AUSCULTATIVE_BREATHING_CHOICES = (        ("везикулярное", "везикулярное"),        ("жестнкое", "жестнкое"),        ("ослабленное", "ослабленное"),    )    WHEEZING_CHOICES = (        ("сухые", "сухые"),        ("влажное", "влажное"),    )    COUGHING_CHOICES = (        ("сухой", "сухой"),        ("мокрый", "мокрый"),    )    CREPITUS_CHOICES = (        ("верхная часть", "верхная часть"),        ("средняя часть", "средняя часть"),        ("нижняя часть", "нижняя часть"),        ("слева", "слева"),        ("справа", "справа"),    )    LUNGS_PERCUSSION_CHOICES = (        ("ясный", "ясный"),        ("легочный", "легочный"),        ("приглушенный", "приглушенный"),        ("тупой", "тупой"),        ("коробочный", "коробочный"),        ("тимпанический", "тимпанический"),        ("притупленно-тимпанический", "притупленно-тимпанический"),        ("слева", "слева"),        ("справа", "справа"),    )    HEAR_EDGE_CHOICES = (        ("расширены", "расширены"),        ("в норме", "в норме"),    )    HEART_TONES_CHOICES = (        ("звучанные", "звучанные"),        ("приглушенные", "приглушенные"),        ("глухие", "глухие"),        ("ритмичные", "ритмичные"),        ("аритмичные", "аритмичные"),        ("мерцательная аритмия", "мерцательная аритмия"),        ("тахикардия", "тахикардия"),        ("брадикардия", "брадикардия"),    )    ACCENT_IN_AORTA_CHOICES = (        ("есть", "есть"),        ("нет", "нет"),        ("патологические шумы", "патологические шумы"),    )    N_C_ON_OT_CHOICES = (        ("усиливается", "усиливается"),        ("неизменяется", "неизменяется"),    )    NOISE_ON_ARTERIA = (        ("сонная", "сонная"),        ("подключичная", "подключичная"),        ("яремная", "яремная"),        ("тыльная", "тыльная"),        ("слева", "слева"),        ("справа", "справа"),    )    APPETIT_CHOICES = (        ("удовлетворительный", "удовлетворительный"),        ("снижен", "снижен"),        ("повышен", "повышен"),        ("анорексия", "анорексия"),    )    TONGUE_CHOICES = (        ("чистый", "чистый"),        ("влажный", "влажный"),        ("географический", "географический"),        ("облажен налетом", "облажен налетом"),    )    CUIM_CHOICES = (        ("есть", "есть"),    )    STOMACH_CHOICES = (        ("мягкий", "мягкий"),        ("вздутый", "вздутый"),        ("впавшый", "впавшый"),    )    ILL_PART_CHOICES = (        ("в правом подреберье", "в правом подреберье"),        ("в гипогастрии", "в гипогастрии"),        ("по ходу толстого кишечника", "по ходу толстого кишечника"),        ("по ходу тонкого кишечника", "по ходу тонкого кишечника"),        ("вокруг пупка", "вокруг пупка"),    )    LIVER_CHOICES = (        ("не увеличена", "не увеличена"),        ("увеличена на ", "увеличена на "),    )    LIVER_EDGE_CHOICES = (        ("острый", "острый"),        ("закругленный", "закругленный"),        ("мягкий", "мягкий"),        ("плотный", "плотный")    )    SPLEEN_CHOICES = (        ("не увеличена", "не увеличена"),        ("увеличена на ", "увеличена на "),    )    SPLEEN_EDGE_CHOICES = (        ("острый", "острый"),        ("закругленный", "закругленный"),        ("мягкий", "мягкий"),        ("плотный", "плотный")    )    STOOL_CHOICES = (        ("жидкий", "жидкий"),        ("кашицеобразный", "кашицеобразный"),        ("оформленный", "оформленный"),        ("запоры", "запоры"),        ("диарея", "диарея"),    )    EFFLEURAGE_SYMPTOMS_CHOICES = (        ("отрицательный", "отрицательный"),        ("положительный", "положительный"),        ("справа", "справа"),        ("слева", "слева"),    )    THYROID_CHOICES = (        ("без изменений", "без изменений"),        ("увеличена", "увеличена"),        ("болезненна", "болезненна"),        ("консистенция", "консистенция"),    )    doctor = models.ForeignKey(Account, on_delete=models.CASCADE, null=True)    illness_history = models.OneToOneField(        IllnessHistory, on_delete=models.CASCADE,        null=True, related_name='init_appointment'    )    complaint = models.TextField(null=True, blank=True, )    anamnesis_morbi = models.TextField(null=True, blank=True)    anamnesis_vitae = models.TextField(null=True, blank=True)    # EPIDANAMNES    contact_with_infectious = models.TextField(null=True, blank=True)    contact_with_orvi = models.BooleanField(default=False)    is_away_two_month = models.BooleanField(default=False, blank=True)    transferred_infectious = models.CharField(max_length=255, null=True, blank=True)    staying_hospital = models.CharField(max_length=255, null=True, blank=True)    receiving_blood_transfusions = models.CharField(max_length=255, null=True, blank=True)    surgical_massive_interventions_six_months = models.CharField(max_length=255, null=True, blank=True)    dentist_visits_last_six_months = models.CharField(max_length=255, null=True, blank=True)    profession_toxics = models.CharField(max_length=255, null=True, blank=True)    additional_data = models.CharField(max_length=255, null=True, blank=True)    # Status praesens objectivus    general_state = models.CharField(null=True, blank=True, max_length=255)    consciousness = models.CharField(choices=CONSCIOUSNESS_CHOICES, null=True, blank=True, max_length=255)    consciousness_state = models.CharField(choices=CONSCIOUSNESS_CHOICES, null=True, blank=True, max_length=255)    constitution = models.CharField(choices=CONSTITUTION_CHOICES, null=True, blank=True, max_length=255)    skin = models.CharField(choices=SKIN_CHOICES, null=True, blank=True, max_length=255)    pigmentation = models.CharField(null=True, blank=True, max_length=255)    depigmentation = models.CharField(null=True, blank=True, max_length=255)    rashes = models.CharField(null=True, blank=True, max_length=255)    vascular_changes = models.CharField(null=True, blank=True, max_length=255)    hemorrhages = models.CharField(null=True, blank=True, max_length=255)    scarring = models.CharField(null=True, blank=True, max_length=255, verbose_name='рубцы')    trophic_changes = models.CharField(null=True, blank=True, max_length=255)    visible_tumors = models.CharField(null=True, blank=True, max_length=255)    skin_moisture = models.CharField(choices=SKIN_MOISTURE_CHOICES, null=True, blank=True, max_length=255)    skin_turgor = models.CharField(choices=SKIN_TURGOR_CHOICES, null=True, blank=True, max_length=255)    subcutaneous_fat = models.CharField(choices=SUBCUTANEOUS_FAT_CHOICES, null=True, blank=True, max_length=255)    temperature = models.FloatField(default=36.6)    height = models.FloatField()    weight = models.FloatField()    heart_beat = models.IntegerField()    arterial_high = models.IntegerField()    arterial_low = models.IntegerField()    imt = models.FloatField()    extra_weight = models.FloatField()    swelling_pastiness = models.CharField(null=True, blank=True, max_length=255)    lymph_nodes = models.CharField(choices=LYMPH_NODES_CHOICES, null=True, blank=True, max_length=255)    # Конно-мыщечная система    deformations = models.CharField(null=True, blank=True, max_length=255)    contractures = models.CharField(null=True, blank=True, max_length=255)    movement_restrictions = models.CharField(null=True, blank=True, max_length=255)    # Dixatelnaya sistema    respiratory_frequency = models.IntegerField()    breathing_type = models.CharField(choices=BREATHING_TYPE_CHOICES, null=True, blank=True, max_length=255)    auscultative_breathing = models.CharField(choices=AUSCULTATIVE_BREATHING_CHOICES, default="везикулярное",                                              null=True, blank=True, max_length=255)    wheezing = models.CharField(choices=WHEEZING_CHOICES, default="влажное", null=True, blank=True, max_length=255)    coughing = models.CharField(choices=COUGHING_CHOICES, null=True, blank=True, max_length=255)    high_humidity = models.CharField(null=True, blank=True, max_length=255)    crepitus = models.CharField(choices=CREPITUS_CHOICES, null=True, blank=True, max_length=255)    lungs_percussion = models.CharField(choices=LUNGS_PERCUSSION_CHOICES, default='ясный',                                        null=True, blank=True, max_length=255)    # сердечно-сосудистая система    heart_edge = models.CharField(choices=HEAR_EDGE_CHOICES, default='расширены', null=True, blank=True, max_length=255)    heart_tones = models.CharField(choices=HEART_TONES_CHOICES, default='звучанные', null=True, blank=True, max_length=255)    accent_in_aorta = models.CharField(choices=ACCENT_IN_AORTA_CHOICES, null=True, blank=True, max_length=255)    noise_change_on_ot = models.CharField(choices=N_C_ON_OT_CHOICES, null=True, blank=True, max_length=255)    ad_left = models.CharField(max_length=255, null=True, default="130/80")    ad_right = models.CharField(max_length=255, null=True, default="130/80")    ps_left = models.CharField(max_length=255, null=True, default="75")    ps_right = models.CharField(max_length=255, null=True, default="75")    pulse_noise_on_arteria = models.CharField(choices=NOISE_ON_ARTERIA, max_length=255, null=True, default="сонная")    # органы пищеварения    appetit = models.CharField(choices=APPETIT_CHOICES, max_length=255, null=True, default="удовлетворительный")    tongue = models.CharField(choices=TONGUE_CHOICES, max_length=255, null=True, default="чистый, влажный")    cracks_ulcers_in_mouth = models.CharField(choices=CUIM_CHOICES, max_length=255, null=True, blank=True)    stomach = models.CharField(choices=STOMACH_CHOICES, max_length=255, null=True, default='мягкий')    ill_part_stomach = models.CharField(choices=ILL_PART_CHOICES, max_length=255, null=True, blank=True)    liver = models.CharField(choices=LIVER_CHOICES, max_length=255, null=True, blank=True, default="не увеличени")    liver_edge = models.CharField(choices=LIVER_EDGE_CHOICES, max_length=255, null=True, blank=True)    spleen = models.CharField(choices=SPLEEN_CHOICES, max_length=255, null=True, default="не увеличени")    spleen_edge = models.CharField(choices=SPLEEN_EDGE_CHOICES, max_length=255, null=True, blank=True)    stool = models.CharField(choices=STOOL_CHOICES, max_length=255, null=True, default="запоры")    stool_frequency = models.CharField(max_length=255, null=True, default="1")    # мочевидетальная система    urinary_system = models.CharField(max_length=255, null=True, default="1")    effleurage_symptoms = models.CharField(choices=EFFLEURAGE_SYMPTOMS_CHOICES, max_length=255,                                           null=True, default="отрицательный")    thyroid = models.CharField(choices=THYROID_CHOICES, max_length=255,                               null=True, default="без изменений")    nerve_system = models.CharField(choices=THYROID_CHOICES, max_length=255,                                    null=True, default="без изменений")    diagnosis = models.ForeignKey(DiagnosisTemplate, null=True, on_delete=models.SET_NULL)    cito = models.BooleanField(default=False)    summary = models.TextField(blank=True, null=True)    def __str__(self):        return f"{self.id}"class InitialAppointmentMedicalServiceModel(models.Model):    STATE_CHOICES = (        ('assigned', 'assigned'),        ('cancelled', 'cancelled'),        ('stopped', 'stopped'),        ('dispatched', 'dispatched'),    )    init_appointment = models.ForeignKey(InitialAppointmentWithDoctorModel, on_delete=models.CASCADE,                                         related_name='medical_services')    illness_history = models.ForeignKey(IllnessHistory, on_delete=models.CASCADE, null=True, blank=True)    medical_service = models.ForeignKey(MedicalService, on_delete=models.SET_NULL, null=True)    price = models.BigIntegerField(default=0)    consulted_doctor = models.ForeignKey(DoctorAccountModel, blank=True, null=True, on_delete=models.SET_NULL,                                         related_name='doctor_iams_consulted')    state = models.CharField(choices=STATE_CHOICES, default='assigned', max_length=50)    created_by = models.ForeignKey(Account, related_name='iams_created', on_delete=models.SET_NULL, null=True)    created_at = models.DateTimeField(auto_now_add=True)    modified_at = models.DateTimeField(auto_now=True)    modified_by = models.ForeignKey(Account, related_name="modf_iams", on_delete=models.SET_NULL, null=True)    def __str__(self):        return f"{self.medical_service.name}"class InitialAppointmentProcedureServiceModel(models.Model):    STATE_CHOICES = (        ('assigned', 'assigned'),        ('cancelled', 'cancelled'),        ('stopped', 'stopped'),        ('dispatched', 'dispatched'),    )    FREQUENCY_CHOICES = (        ("каждый день", "каждый день"),        ("через день", "через день"),    )    init_appointment = models.ForeignKey(InitialAppointmentWithDoctorModel, on_delete=models.CASCADE,                                         related_name="procedures")    illness_history = models.ForeignKey(IllnessHistory, on_delete=models.CASCADE, null=True, blank=True)    medical_service = models.ForeignKey(MedicalService, on_delete=models.SET_NULL, null=True)    price = models.BigIntegerField(default=0)    procedure_doctor = models.ForeignKey(DoctorAccountModel, blank=True, null=True, on_delete=models.SET_NULL,                                         related_name='doctor_iaps')    state = models.CharField(choices=STATE_CHOICES, default='assigned', max_length=50)    quantity = models.IntegerField(default=1)    start_date = models.DateField(auto_now_add=True, null=True)    frequency = models.CharField(choices=FREQUENCY_CHOICES, default='каждый день', max_length=50)    comments = models.TextField(null=True, blank=True)    created_by = models.ForeignKey(Account, related_name='iaps_created', on_delete=models.SET_NULL, null=True)    created_at = models.DateTimeField(auto_now_add=True)    modified_at = models.DateTimeField(auto_now=True)    modified_by = models.ForeignKey(Account, related_name="modf_iaps", on_delete=models.SET_NULL, null=True)    def __str__(self):        return f"{self.illness_history.series_number} - {self.medical_service.name}"class InitialAppointmentLabResearchServiceModel(models.Model):    STATE_CHOICES = (        ('assigned', 'assigned'),        ('cancelled', 'cancelled'),        ('stopped', 'stopped'),        ('dispatched', 'dispatched'),        ('results', 'results'),    )    init_appointment = models.ForeignKey(InitialAppointmentWithDoctorModel, on_delete=models.CASCADE,                                         related_name="lab_research")    illness_history = models.ForeignKey(IllnessHistory, on_delete=models.CASCADE, null=True, related_name='lab_research')    lab = models.ForeignKey(LabResearchModel, on_delete=models.SET_NULL, null=True, related_name="lab_init_app")    price = models.BigIntegerField(default=0)    procedure_doctor = models.ForeignKey(DoctorAccountModel, blank=True, null=True, on_delete=models.SET_NULL,                                         related_name='doctor_ialr')    state = models.CharField(choices=STATE_CHOICES, default='assigned', max_length=50)    start_date = models.DateField(auto_now_add=True, null=True)    comments = models.TextField(null=True, blank=True)    created_by = models.ForeignKey(Account, related_name='ialr_created', on_delete=models.SET_NULL, null=True)    created_at = models.DateTimeField(auto_now_add=True)    modified_at = models.DateTimeField(auto_now=True)    modified_by = models.ForeignKey(Account, related_name="modf_ialr", on_delete=models.SET_NULL, null=True)    def __str__(self):        return f"{self.lab.name}"class InitialAppointmentPillsInjectionsModel(models.Model):    STATE_CHOICES = (        ('assigned', 'assigned'),        ('cancelled', 'cancelled'),        ('stopped', 'stopped'),        ('dispatched', 'dispatched'),    )    PILLS_FREQUENCY_CHOICES = (        ("3 раза в день", "3 раза в день"),        ("до еды", "до еды"),        ("после еды", "после еды"),    )    init_appointment = models.ForeignKey(InitialAppointmentWithDoctorModel, on_delete=models.CASCADE,                                         related_name="pills")    illness_history = models.ForeignKey(IllnessHistory, on_delete=models.CASCADE, null=True)    pills_injections = models.ForeignKey(ItemsModel, on_delete=models.CASCADE)    price = models.BigIntegerField(default=0)    state = models.CharField(choices=STATE_CHOICES, default='assigned', max_length=50)    quantity = models.IntegerField(default=1)    period_days = models.IntegerField(null=True, blank=True)    start_date = models.DateField(auto_now_add=True, null=True)    end_date = models.DateField(null=True)    frequency = models.CharField(choices=PILLS_FREQUENCY_CHOICES, default='', max_length=50)    comments = models.TextField(null=True, blank=True)    instruction = models.TextField(null=True, blank=True)    created_by = models.ForeignKey(Account, related_name='iapi_created', on_delete=models.SET_NULL, null=True)    created_at = models.DateTimeField(auto_now_add=True)    modified_at = models.DateTimeField(auto_now=True)    modified_by = models.ForeignKey(Account, related_name="modf_iapi", on_delete=models.SET_NULL, null=True)    def __str__(self):        return f"{self.pills_injections.name}"