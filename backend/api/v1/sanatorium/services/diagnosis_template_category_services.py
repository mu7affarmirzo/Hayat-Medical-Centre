from django.shortcuts import get_object_or_404from rest_framework import statusfrom rest_framework.response import Responsefrom api.v1.sanatorium.serializers import SearchSerializer, BasicTemplateModelSerializer, GetDiagnosisWithCategory, \    PostBasicTemplateModelSerializerfrom apps.sanatorium.models import BasicTemplateModel, DiagnosisTemplateCategorydef search_diagnosis_with_category(request):    data = request.data    serializer = SearchSerializer(data=data)    if serializer.is_valid():        diagnosis = BasicTemplateModel.objects.filter(category__name=data["category"], name__search=data["word"])        serializer = BasicTemplateModelSerializer(diagnosis, many=True)        return Response(serializer.data)    return Response(serializer.errors)def get_diagnosis_with_category(request):    data = request.data    serializer = GetDiagnosisWithCategory(data=data)    if serializer.is_valid():        diagnosis = BasicTemplateModel.objects.filter(category__name=data["category"])        serializer = BasicTemplateModelSerializer(diagnosis, many=True)        return Response(serializer.data)    return Response(serializer.errors)def get_diagnosis_with_pk(pk):    diagnosis = get_object_or_404(BasicTemplateModel, pk=pk)    serializer = BasicTemplateModelSerializer(diagnosis)    return Response(serializer.data)def post_diagnosis(request):    data = request.data    serializer = PostBasicTemplateModelSerializer(data=data)    if serializer.is_valid():        category = DiagnosisTemplateCategory.objects.get(name=data["category"])        diagnosis = BasicTemplateModel.objects.create(            category=category,            name=data["name"],            code=data["code"]        )        serializer = BasicTemplateModelSerializer(diagnosis)        return Response(serializer.data, status=status.HTTP_201_CREATED)    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)